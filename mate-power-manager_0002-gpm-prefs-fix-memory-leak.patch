From 547c64b8d616e3e55ca54eebaa2e74c43c237b56 Mon Sep 17 00:00:00 2001
From: rbuj <robert.buj@gmail.com>
Date: Fri, 22 Oct 2021 12:59:47 +0200
Subject: [PATCH 2/2] gpm-prefs: fix memory leak

In addition, it adds enumerations to access indexed arrays.
---
 src/gpm-prefs.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/gpm-prefs.c b/src/gpm-prefs.c
index 8a1e26e..91a2950 100644
--- a/src/gpm-prefs.c
+++ b/src/gpm-prefs.c
@@ -84,6 +84,7 @@ main (int argc, char **argv)
 	g_option_context_add_main_entries (context, options, GETTEXT_PACKAGE);
 	g_option_context_add_group (context, gtk_get_option_group (FALSE));
 	g_option_context_parse (context, &argc, &argv, NULL);
+	g_option_context_free (context);
 
 	gdk_init (&argc, &argv);
 	app = gtk_application_new("org.mate.PowerManager.Preferences", 0);
@@ -103,8 +104,5 @@ main (int argc, char **argv)
 
 	g_object_unref (app);
 
-/* seems to not work...
-	g_option_context_free (context); */
-
 	return status;
 }
-- 
2.36.1

